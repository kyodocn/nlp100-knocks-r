<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 準備運動・UNIXコマンド・正規表現 | Rで言語処理100本ノックを解くわけがない</title>
  <meta name="description" content="Rで言語処理100本ノック 2020に取り組んでいます。Rでやっているコードの例を示すにとどまるもので、丁寧な解説を添えているようなものではありません" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 準備運動・UNIXコマンド・正規表現 | Rで言語処理100本ノックを解くわけがない" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://paithiov909.github.io/nlp100-knocks-r" />
  <meta property="og:image" content="https://paithiov909.github.io/nlp100-knocks-r/images/coverimage.jpg" />
  <meta property="og:description" content="Rで言語処理100本ノック 2020に取り組んでいます。Rでやっているコードの例を示すにとどまるもので、丁寧な解説を添えているようなものではありません" />
  <meta name="github-repo" content="paithiov909/nlp100-knocks-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 準備運動・UNIXコマンド・正規表現 | Rで言語処理100本ノックを解くわけがない" />
  
  <meta name="twitter:description" content="Rで言語処理100本ノック 2020に取り組んでいます。Rでやっているコードの例を示すにとどまるもので、丁寧な解説を添えているようなものではありません" />
  <meta name="twitter:image" content="https://paithiov909.github.io/nlp100-knocks-r/images/coverimage.jpg" />

<meta name="author" content="Kato Akiru" />


<meta name="date" content="2021-01-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="index.html"/>
<link rel="next" href="形態素解析.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Rで言語処理100本ノックを解くわけがない</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> はじめに</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#本書について"><i class="fa fa-check"></i><b>1.1</b> 本書について</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#全体の見通し"><i class="fa fa-check"></i><b>1.2</b> 全体の見通し</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#使用する環境など"><i class="fa fa-check"></i><b>1.3</b> 使用する環境など</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#mecabcabocha"><i class="fa fa-check"></i><b>1.3.1</b> MeCab/CaboCha</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#rパッケージ"><i class="fa fa-check"></i><b>1.3.2</b> Rパッケージ</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#資料"><i class="fa fa-check"></i><b>1.4</b> 資料</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#tokenize-character-vector"><i class="fa fa-check"></i><b>1.4.1</b> Tokenize Character Vector</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html"><i class="fa fa-check"></i><b>2</b> 準備運動・UNIXコマンド・正規表現</a>
<ul>
<li class="chapter" data-level="2.1" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#準備運動"><i class="fa fa-check"></i><b>2.1</b> 準備運動</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#文字列の逆順"><i class="fa fa-check"></i><b>2.1.1</b> 00. 文字列の逆順</a></li>
<li class="chapter" data-level="2.1.2" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#パタトクカシーー"><i class="fa fa-check"></i><b>2.1.2</b> 01. 「パタトクカシーー」</a></li>
<li class="chapter" data-level="2.1.3" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#パトカータクシーパタトクカシーー"><i class="fa fa-check"></i><b>2.1.3</b> 02. 「パトカー」＋「タクシー」＝「パタトクカシーー」</a></li>
<li class="chapter" data-level="2.1.4" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#円周率"><i class="fa fa-check"></i><b>2.1.4</b> 03. 円周率</a></li>
<li class="chapter" data-level="2.1.5" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#元素記号"><i class="fa fa-check"></i><b>2.1.5</b> 04. 元素記号</a></li>
<li class="chapter" data-level="2.1.6" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#n-gram"><i class="fa fa-check"></i><b>2.1.6</b> 05. n-gram</a></li>
<li class="chapter" data-level="2.1.7" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#集合"><i class="fa fa-check"></i><b>2.1.7</b> 06. 集合</a></li>
<li class="chapter" data-level="2.1.8" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#テンプレートによる文生成"><i class="fa fa-check"></i><b>2.1.8</b> 07. テンプレートによる文生成</a></li>
<li class="chapter" data-level="2.1.9" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#暗号文"><i class="fa fa-check"></i><b>2.1.9</b> 08. 暗号文</a></li>
<li class="chapter" data-level="2.1.10" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#typoglycemia"><i class="fa fa-check"></i><b>2.1.10</b> 09. Typoglycemia</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#unixコマンド"><i class="fa fa-check"></i><b>2.2</b> UNIXコマンド</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#section"><i class="fa fa-check"></i><b>2.2.1</b> 10~15</a></li>
<li class="chapter" data-level="2.2.2" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#ファイルをn分割する"><i class="fa fa-check"></i><b>2.2.2</b> 16. ファイルをN分割する</a></li>
<li class="chapter" data-level="2.2.3" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#列目の文字列の異なり"><i class="fa fa-check"></i><b>2.2.3</b> 17. １列目の文字列の異なり</a></li>
<li class="chapter" data-level="2.2.4" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#各行を3コラム目の数値の降順にソート"><i class="fa fa-check"></i><b>2.2.4</b> 18. 各行を3コラム目の数値の降順にソート</a></li>
<li class="chapter" data-level="2.2.5" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#各行の1コラム目の文字列の出現頻度を求め出現頻度の高い順に並べる"><i class="fa fa-check"></i><b>2.2.5</b> 19. 各行の1コラム目の文字列の出現頻度を求め，出現頻度の高い順に並べる</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#正規表現"><i class="fa fa-check"></i><b>2.3</b> 正規表現</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#jsonデータの読み込み"><i class="fa fa-check"></i><b>2.3.1</b> 20. JSONデータの読み込み</a></li>
<li class="chapter" data-level="2.3.2" data-path="準備運動unixコマンド正規表現.html"><a href="準備運動unixコマンド正規表現.html#カテゴリ名を含む行を抽出"><i class="fa fa-check"></i><b>2.3.2</b> 21. カテゴリ名を含む行を抽出</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="形態素解析.html"><a href="形態素解析.html"><i class="fa fa-check"></i><b>3</b> 形態素解析</a>
<ul>
<li class="chapter" data-level="3.1" data-path="形態素解析.html"><a href="形態素解析.html#データの読み込み"><i class="fa fa-check"></i><b>3.1</b> データの読み込み</a></li>
<li class="chapter" data-level="3.2" data-path="形態素解析.html"><a href="形態素解析.html#形態素解析-1"><i class="fa fa-check"></i><b>3.2</b> 形態素解析</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="形態素解析.html"><a href="形態素解析.html#形態素解析結果の読み込み"><i class="fa fa-check"></i><b>3.2.1</b> 30. 形態素解析結果の読み込み</a></li>
<li class="chapter" data-level="3.2.2" data-path="形態素解析.html"><a href="形態素解析.html#動詞"><i class="fa fa-check"></i><b>3.2.2</b> 31. 動詞</a></li>
<li class="chapter" data-level="3.2.3" data-path="形態素解析.html"><a href="形態素解析.html#動詞の原形"><i class="fa fa-check"></i><b>3.2.3</b> 32. 動詞の原形</a></li>
<li class="chapter" data-level="3.2.4" data-path="形態素解析.html"><a href="形態素解析.html#aのb"><i class="fa fa-check"></i><b>3.2.4</b> 33. 「AのB」</a></li>
<li class="chapter" data-level="3.2.5" data-path="形態素解析.html"><a href="形態素解析.html#名詞の連接"><i class="fa fa-check"></i><b>3.2.5</b> 34. 名詞の連接</a></li>
<li class="chapter" data-level="3.2.6" data-path="形態素解析.html"><a href="形態素解析.html#単語の出現頻度"><i class="fa fa-check"></i><b>3.2.6</b> 35. 単語の出現頻度</a></li>
<li class="chapter" data-level="3.2.7" data-path="形態素解析.html"><a href="形態素解析.html#頻度上位10語"><i class="fa fa-check"></i><b>3.2.7</b> 36. 頻度上位10語</a></li>
<li class="chapter" data-level="3.2.8" data-path="形態素解析.html"><a href="形態素解析.html#猫と共起頻度の高い上位10語"><i class="fa fa-check"></i><b>3.2.8</b> 37. 「猫」と共起頻度の高い上位10語</a></li>
<li class="chapter" data-level="3.2.9" data-path="形態素解析.html"><a href="形態素解析.html#ヒストグラム"><i class="fa fa-check"></i><b>3.2.9</b> 38. ヒストグラム</a></li>
<li class="chapter" data-level="3.2.10" data-path="形態素解析.html"><a href="形態素解析.html#zipfの法則"><i class="fa fa-check"></i><b>3.2.10</b> 39. Zipfの法則</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="係り受け解析.html"><a href="係り受け解析.html"><i class="fa fa-check"></i><b>4</b> 係り受け解析</a>
<ul>
<li class="chapter" data-level="4.1" data-path="係り受け解析.html"><a href="係り受け解析.html#データの読み込み-1"><i class="fa fa-check"></i><b>4.1</b> データの読み込み</a></li>
<li class="chapter" data-level="4.2" data-path="係り受け解析.html"><a href="係り受け解析.html#係り受け解析-1"><i class="fa fa-check"></i><b>4.2</b> 係り受け解析</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="係り受け解析.html"><a href="係り受け解析.html#係り受け解析結果の読み込み形態素"><i class="fa fa-check"></i><b>4.2.1</b> 40. 係り受け解析結果の読み込み（形態素）</a></li>
<li class="chapter" data-level="4.2.2" data-path="係り受け解析.html"><a href="係り受け解析.html#係り受け解析結果の読み込み文節係り受け"><i class="fa fa-check"></i><b>4.2.2</b> 41. 係り受け解析結果の読み込み（文節・係り受け）</a></li>
<li class="chapter" data-level="4.2.3" data-path="係り受け解析.html"><a href="係り受け解析.html#係り元と係り先の文節の表示"><i class="fa fa-check"></i><b>4.2.3</b> 42. 係り元と係り先の文節の表示</a></li>
<li class="chapter" data-level="4.2.4" data-path="係り受け解析.html"><a href="係り受け解析.html#名詞を含む文節が動詞を含む文節に係るものを抽出"><i class="fa fa-check"></i><b>4.2.4</b> 43. 名詞を含む文節が動詞を含む文節に係るものを抽出</a></li>
<li class="chapter" data-level="4.2.5" data-path="係り受け解析.html"><a href="係り受け解析.html#係り受け木の可視化"><i class="fa fa-check"></i><b>4.2.5</b> 44. 係り受け木の可視化</a></li>
<li class="chapter" data-level="4.2.6" data-path="係り受け解析.html"><a href="係り受け解析.html#動詞の格パターンの抽出"><i class="fa fa-check"></i><b>4.2.6</b> 45. 動詞の格パターンの抽出</a></li>
<li class="chapter" data-level="4.2.7" data-path="係り受け解析.html"><a href="係り受け解析.html#動詞の格フレーム情報の抽出"><i class="fa fa-check"></i><b>4.2.7</b> 46. 動詞の格フレーム情報の抽出</a></li>
<li class="chapter" data-level="4.2.8" data-path="係り受け解析.html"><a href="係り受け解析.html#機能動詞構文のマイニング"><i class="fa fa-check"></i><b>4.2.8</b> 47. 機能動詞構文のマイニング</a></li>
<li class="chapter" data-level="4.2.9" data-path="係り受け解析.html"><a href="係り受け解析.html#名詞から根へのパスの抽出"><i class="fa fa-check"></i><b>4.2.9</b> 48. 名詞から根へのパスの抽出</a></li>
<li class="chapter" data-level="4.2.10" data-path="係り受け解析.html"><a href="係り受け解析.html#名詞間の係り受けパスの抽出"><i class="fa fa-check"></i><b>4.2.10</b> 49. 名詞間の係り受けパスの抽出</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="セッション情報.html"><a href="セッション情報.html"><i class="fa fa-check"></i><b>5</b> セッション情報</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Rで言語処理100本ノックを解くわけがない</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="準備運動unixコマンド正規表現" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> 準備運動・UNIXコマンド・正規表現</h1>
<div id="準備運動" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> 準備運動</h2>
<p>コーディングの方針として、値はなるべくリストのまま持っておいて最後に<code>unlist</code>する感じにしています。また、<code>paste</code>ではなくて<code>stringr::str_c</code>で統一しています。</p>
<div id="文字列の逆順" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> 00. 文字列の逆順</h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="準備運動unixコマンド正規表現.html#cb33-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">&quot;stressed&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="準備運動unixコマンド正規表現.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> <span class="fu">rev</span>(.)) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="準備運動unixコマンド正規表現.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="準備運動unixコマンド正規表現.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;desserts&quot;</code></pre>
</div>
<div id="パタトクカシーー" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> 01. 「パタトクカシーー」</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="準備運動unixコマンド正規表現.html#cb35-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">&quot;パタトクカシーー&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="準備運動unixコマンド正規表現.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> purrr<span class="sc">::</span><span class="fu">pluck</span>(.[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)])) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="準備運動unixコマンド正規表現.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="準備運動unixコマンド正規表現.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;パトカー&quot;</code></pre>
</div>
<div id="パトカータクシーパタトクカシーー" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> 02. 「パトカー」＋「タクシー」＝「パタトクカシーー」</h3>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="準備運動unixコマンド正規表現.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(<span class="st">&quot;パトカー&quot;</span>, <span class="st">&quot;タクシー&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="準備運動unixコマンド正規表現.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_split</span>(., <span class="at">pattern =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="準備運動unixコマンド正規表現.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">flatten</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="準備運動unixコマンド正規表現.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">pmap</span>(<span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_c</span>(.x, .y, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="準備運動unixコマンド正規表現.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-6"><a href="準備運動unixコマンド正規表現.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;パタトクカシーー&quot;</code></pre>
</div>
<div id="円周率" class="section level3" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> 03. 円周率</h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="準備運動unixコマンド正規表現.html#cb39-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">&quot;Now I need a drink, alcoholic of course, after the heavy lectures involving quantum mechanics.&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="準備運動unixコマンド正規表現.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">flatten</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="準備運動unixコマンド正規表現.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_count</span>(., <span class="at">pattern =</span> <span class="st">&quot;[:alpha:]&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="準備運動unixコマンド正規表現.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code></pre></div>
<pre><code>#&gt;  [1] 3 1 4 1 5 9 2 6 5 3 5 8 9 7 9</code></pre>
</div>
<div id="元素記号" class="section level3" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> 04. 元素記号</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="準備運動unixコマンド正規表現.html#cb41-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">&quot;Hi He Lied Because Boron Could Not Oxidize Fluorine. New Nations Might Also Sign Peace Security Clause. Arthur King Can.&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="準備運動unixコマンド正規表現.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">flatten</span>() <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="準備運動unixコマンド正規表現.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">imap</span>(<span class="sc">~</span></span>
<span id="cb41-4"><a href="準備運動unixコマンド正規表現.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">if_else</span>(</span>
<span id="cb41-5"><a href="準備運動unixコマンド正規表現.html#cb41-5" aria-hidden="true" tabindex="-1"></a>    .y <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">19</span>),</span>
<span id="cb41-6"><a href="準備運動unixコマンド正規表現.html#cb41-6" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_sub</span>(.x, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb41-7"><a href="準備運動unixコマンド正規表現.html#cb41-7" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_sub</span>(.x, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb41-8"><a href="準備運動unixコマンド正規表現.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb41-9"><a href="準備運動unixコマンド正規表現.html#cb41-9" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">imap</span>(<span class="cf">function</span>(x, i) {</span>
<span id="cb41-10"><a href="準備運動unixコマンド正規表現.html#cb41-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(x) <span class="ot">&lt;-</span> i</span>
<span id="cb41-11"><a href="準備運動unixコマンド正規表現.html#cb41-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(x)</span>
<span id="cb41-12"><a href="準備運動unixコマンド正規表現.html#cb41-12" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb41-13"><a href="準備運動unixコマンド正規表現.html#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code></pre></div>
<pre><code>#&gt;    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16 
#&gt;  &quot;H&quot; &quot;He&quot; &quot;Li&quot; &quot;Be&quot;  &quot;B&quot;  &quot;C&quot;  &quot;N&quot;  &quot;O&quot;  &quot;F&quot; &quot;Ne&quot; &quot;Na&quot; &quot;Mi&quot; &quot;Al&quot; &quot;Si&quot;  &quot;P&quot;  &quot;S&quot; 
#&gt;   17   18   19   20 
#&gt; &quot;Cl&quot; &quot;Ar&quot;  &quot;K&quot; &quot;Ca&quot;</code></pre>
</div>
<div id="n-gram" class="section level3" number="2.1.6">
<h3><span class="header-section-number">2.1.6</span> 05. n-gram</h3>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="準備運動unixコマンド正規表現.html#cb43-1" aria-hidden="true" tabindex="-1"></a>ngram <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">n =</span> <span class="dv">2</span>, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>) {</span>
<span id="cb43-2"><a href="準備運動unixコマンド正規表現.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">is.character</span>(x))</span>
<span id="cb43-3"><a href="準備運動unixコマンド正規表現.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">#### 先例がみんな`embed`を使っているが、ここでは使わない ####</span></span>
<span id="cb43-4"><a href="準備運動unixコマンド正規表現.html#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="準備運動unixコマンド正規表現.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  tokens <span class="ot">&lt;-</span> <span class="fu">unlist</span>(stringr<span class="sc">::</span><span class="fu">str_split</span>(x, <span class="at">pattern =</span> sep))</span>
<span id="cb43-6"><a href="準備運動unixコマンド正規表現.html#cb43-6" aria-hidden="true" tabindex="-1"></a>  len <span class="ot">&lt;-</span> <span class="fu">length</span>(tokens)</span>
<span id="cb43-7"><a href="準備運動unixコマンド正規表現.html#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="準備運動unixコマンド正規表現.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (len <span class="sc">&lt;</span> n) {</span>
<span id="cb43-9"><a href="準備運動unixコマンド正規表現.html#cb43-9" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="dv">0</span>)</span>
<span id="cb43-10"><a href="準備運動unixコマンド正規表現.html#cb43-10" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb43-11"><a href="準備運動unixコマンド正規表現.html#cb43-11" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">max</span>(<span class="dv">1</span>, len <span class="sc">-</span> n <span class="sc">+</span> <span class="dv">1</span>), <span class="cf">function</span>(i) {</span>
<span id="cb43-12"><a href="準備運動unixコマンド正規表現.html#cb43-12" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_c</span>(tokens[i<span class="sc">:</span><span class="fu">min</span>(len, i <span class="sc">+</span> n <span class="sc">-</span> <span class="dv">1</span>)], <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb43-13"><a href="準備運動unixコマンド正規表現.html#cb43-13" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb43-14"><a href="準備運動unixコマンド正規表現.html#cb43-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb43-15"><a href="準備運動unixコマンド正規表現.html#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="準備運動unixコマンド正規表現.html#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb43-17"><a href="準備運動unixコマンド正規表現.html#cb43-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-18"><a href="準備運動unixコマンド正規表現.html#cb43-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ngram</span>(<span class="st">&quot;I am an NLPer&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;I am&quot;     &quot;am an&quot;    &quot;an NLPer&quot;</code></pre>
</div>
<div id="集合" class="section level3" number="2.1.7">
<h3><span class="header-section-number">2.1.7</span> 06. 集合</h3>
<p>回答略</p>
</div>
<div id="テンプレートによる文生成" class="section level3" number="2.1.8">
<h3><span class="header-section-number">2.1.8</span> 07. テンプレートによる文生成</h3>
<p>回答略</p>
</div>
<div id="暗号文" class="section level3" number="2.1.9">
<h3><span class="header-section-number">2.1.9</span> 08. 暗号文</h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="準備運動unixコマンド正規表現.html#cb45-1" aria-hidden="true" tabindex="-1"></a>cipher <span class="ot">&lt;-</span> <span class="cf">function</span>(str) {</span>
<span id="cb45-2"><a href="準備運動unixコマンド正規表現.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  f <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">as_mapper</span>(<span class="sc">~</span> <span class="dv">219</span> <span class="sc">-</span> .)</span>
<span id="cb45-3"><a href="準備運動unixコマンド正規表現.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  v <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_split</span>(str, <span class="at">pattern =</span> <span class="st">&quot;&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-4"><a href="準備運動unixコマンド正規表現.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">sapply</span>(v[<span class="dv">1</span>, ], <span class="cf">function</span>(char) {</span>
<span id="cb45-5"><a href="準備運動unixコマンド正規表現.html#cb45-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">if_else</span>(</span>
<span id="cb45-6"><a href="準備運動unixコマンド正規表現.html#cb45-6" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_detect</span>(char, <span class="st">&quot;[:lower:]&quot;</span>),</span>
<span id="cb45-7"><a href="準備運動unixコマンド正規表現.html#cb45-7" aria-hidden="true" tabindex="-1"></a>      char <span class="sc">%&gt;%</span></span>
<span id="cb45-8"><a href="準備運動unixコマンド正規表現.html#cb45-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">charToRaw</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-9"><a href="準備運動unixコマンド正規表現.html#cb45-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">as.integer</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-10"><a href="準備運動unixコマンド正規表現.html#cb45-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">f</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-11"><a href="準備運動unixコマンド正規表現.html#cb45-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">as.raw</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-12"><a href="準備運動unixコマンド正規表現.html#cb45-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rawToChar</span>(),</span>
<span id="cb45-13"><a href="準備運動unixコマンド正規表現.html#cb45-13" aria-hidden="true" tabindex="-1"></a>      char</span>
<span id="cb45-14"><a href="準備運動unixコマンド正規表現.html#cb45-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-15"><a href="準備運動unixコマンド正規表現.html#cb45-15" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb45-16"><a href="準備運動unixコマンド正規表現.html#cb45-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(stringr<span class="sc">::</span><span class="fu">str_c</span>(res, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb45-17"><a href="準備運動unixコマンド正規表現.html#cb45-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-18"><a href="準備運動unixコマンド正規表現.html#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="fu">cipher</span>(<span class="st">&quot;I couldn&#39;t believe that I could actually understand what I was reading : the phenomenal power of the human mind.&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;I xlfowm&#39;g yvorvev gszg I xlfow zxgfzoob fmwvihgzmw dszg I dzh ivzwrmt : gsv ksvmlnvmzo kldvi lu gsv sfnzm nrmw.&quot;</code></pre>
</div>
<div id="typoglycemia" class="section level3" number="2.1.10">
<h3><span class="header-section-number">2.1.10</span> 09. Typoglycemia</h3>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="準備運動unixコマンド正規表現.html#cb47-1" aria-hidden="true" tabindex="-1"></a>typoglycemia <span class="ot">&lt;-</span> <span class="cf">function</span>(str) {</span>
<span id="cb47-2"><a href="準備運動unixコマンド正規表現.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="cf">function</span>(char) {</span>
<span id="cb47-3"><a href="準備運動unixコマンド正規表現.html#cb47-3" aria-hidden="true" tabindex="-1"></a>    subset <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_sub</span>(char, <span class="dv">2</span>, <span class="fu">nchar</span>(char) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-4"><a href="準備運動unixコマンド正規表現.html#cb47-4" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="at">pattern =</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-5"><a href="準備運動unixコマンド正規表現.html#cb47-5" aria-hidden="true" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">flatten</span>() <span class="sc">%&gt;%</span></span>
<span id="cb47-6"><a href="準備運動unixコマンド正規表現.html#cb47-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>()</span>
<span id="cb47-7"><a href="準備運動unixコマンド正規表現.html#cb47-7" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_c</span>(</span>
<span id="cb47-8"><a href="準備運動unixコマンド正規表現.html#cb47-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb47-9"><a href="準備運動unixコマンド正規表現.html#cb47-9" aria-hidden="true" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_sub</span>(char, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb47-10"><a href="準備運動unixコマンド正規表現.html#cb47-10" aria-hidden="true" tabindex="-1"></a>        subset,</span>
<span id="cb47-11"><a href="準備運動unixコマンド正規表現.html#cb47-11" aria-hidden="true" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_sub</span>(char, <span class="fu">nchar</span>(char), <span class="fu">nchar</span>(char))</span>
<span id="cb47-12"><a href="準備運動unixコマンド正規表現.html#cb47-12" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb47-13"><a href="準備運動unixコマンド正規表現.html#cb47-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">collapse =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb47-14"><a href="準備運動unixコマンド正規表現.html#cb47-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb47-15"><a href="準備運動unixコマンド正規表現.html#cb47-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(res)</span>
<span id="cb47-16"><a href="準備運動unixコマンド正規表現.html#cb47-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb47-17"><a href="準備運動unixコマンド正規表現.html#cb47-17" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_split</span>(str, <span class="at">pattern =</span> <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-18"><a href="準備運動unixコマンド正規表現.html#cb47-18" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">flatten</span>() <span class="sc">%&gt;%</span></span>
<span id="cb47-19"><a href="準備運動unixコマンド正規表現.html#cb47-19" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span></span>
<span id="cb47-20"><a href="準備運動unixコマンド正規表現.html#cb47-20" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">if_else</span>(</span>
<span id="cb47-21"><a href="準備運動unixコマンド正規表現.html#cb47-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(stringr<span class="sc">::</span><span class="fu">str_subset</span>(., <span class="st">&quot;[:alpha:]|:&quot;</span>)) <span class="sc">&lt;=</span> <span class="dv">4</span>,</span>
<span id="cb47-22"><a href="準備運動unixコマンド正規表現.html#cb47-22" aria-hidden="true" tabindex="-1"></a>      .,</span>
<span id="cb47-23"><a href="準備運動unixコマンド正規表現.html#cb47-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">f</span>(.)</span>
<span id="cb47-24"><a href="準備運動unixコマンド正規表現.html#cb47-24" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb47-25"><a href="準備運動unixコマンド正規表現.html#cb47-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(stringr<span class="sc">::</span><span class="fu">str_c</span>(res, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb47-26"><a href="準備運動unixコマンド正規表現.html#cb47-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-27"><a href="準備運動unixコマンド正規表現.html#cb47-27" aria-hidden="true" tabindex="-1"></a><span class="fu">typoglycemia</span>(<span class="st">&quot;I couldn&#39;t believe that I could actually understand what I was reading : the phenomenal power of the human mind.&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;I cnodu&#39;lt belivee that I cuold aaullcty urnatesndd what I was rndaeig : the pnehnmaeol poewr of the haumn midn.&quot;</code></pre>
</div>
</div>
<div id="unixコマンド" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> UNIXコマンド</h2>
<p>確認はやりません。<del>だってWindowsだもん</del></p>
<div id="section" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> 10~15</h3>
<p>素のテキストとして読んでもしょうがないので、以下のようなこと雰囲気でやります。</p>
<ul>
<li><ol start="10" style="list-style-type: decimal">
<li>行数のカウント</li>
</ol></li>
<li><ol start="11" style="list-style-type: decimal">
<li>タブをスペースに置換</li>
</ol></li>
<li><ol start="14" style="list-style-type: decimal">
<li>先頭からN行を出力</li>
</ol></li>
<li><ol start="15" style="list-style-type: decimal">
<li>末尾のN行を出力</li>
</ol></li>
</ul>
<p>以下の２つはやりませんが、たぶん<code>fread(temp, select = c(1, 2))</code>みたいな感じで取れます。</p>
<ul>
<li><ol start="12" style="list-style-type: decimal">
<li>1列目をcol1.txtに，2列目をcol2.txtに保存</li>
</ol></li>
<li><ol start="13" style="list-style-type: decimal">
<li>col1.txtとcol2.txtをマージ</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="準備運動unixコマンド正規表現.html#cb49-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&quot;.txt&quot;</span>)</span>
<span id="cb49-2"><a href="準備運動unixコマンド正規表現.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://nlp100.github.io/data/popular-names.txt&quot;</span>, temp)</span>
<span id="cb49-3"><a href="準備運動unixコマンド正規表現.html#cb49-3" aria-hidden="true" tabindex="-1"></a>txt <span class="ot">&lt;-</span> temp <span class="sc">%&gt;%</span></span>
<span id="cb49-4"><a href="準備運動unixコマンド正規表現.html#cb49-4" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">fread</span>(</span>
<span id="cb49-5"><a href="準備運動unixコマンド正規表現.html#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>,</span>
<span id="cb49-6"><a href="準備運動unixコマンド正規表現.html#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">quote =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb49-7"><a href="準備運動unixコマンド正規表現.html#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">header =</span> <span class="cn">FALSE</span>,</span>
<span id="cb49-8"><a href="準備運動unixコマンド正規表現.html#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;num_of_people&quot;</span>, <span class="st">&quot;year&quot;</span>),</span>
<span id="cb49-9"><a href="準備運動unixコマンド正規表現.html#cb49-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">colClasses =</span> <span class="fu">list</span>(<span class="st">&quot;character&quot;</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">&quot;character&quot;</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">&quot;integer&quot;</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">&quot;integer&quot;</span> <span class="ot">=</span> <span class="dv">4</span>),</span>
<span id="cb49-10"><a href="準備運動unixコマンド正規表現.html#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">data.table =</span> <span class="cn">FALSE</span></span>
<span id="cb49-11"><a href="準備運動unixコマンド正規表現.html#cb49-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-12"><a href="準備運動unixコマンド正規表現.html#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="準備運動unixコマンド正規表現.html#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(txt)</span></code></pre></div>
<pre><code>#&gt; [1] 2780</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="準備運動unixコマンド正規表現.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(txt, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>#&gt;   name sex num_of_people year
#&gt; 1 Mary   F          7065 1880
#&gt; 2 Anna   F          2604 1880
#&gt; 3 Emma   F          2003 1880</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="準備運動unixコマンド正規表現.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(txt, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>#&gt;       name sex num_of_people year
#&gt; 2778 Lucas   M         12585 2018
#&gt; 2779 Mason   M         12435 2018
#&gt; 2780 Logan   M         12352 2018</code></pre>
</div>
<div id="ファイルをn分割する" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> 16. ファイルをN分割する</h3>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="準備運動unixコマンド正規表現.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">split</span>(txt, <span class="fu">sort</span>(<span class="fu">rank</span>(<span class="fu">row.names</span>(txt)) <span class="sc">%%</span> <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="準備運動unixコマンド正規表現.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> <span class="fu">head</span>(.)) <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="準備運動unixコマンド正規表現.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>#&gt; $`0`
#&gt;        name sex num_of_people year
#&gt; 1      Mary   F          7065 1880
#&gt; 2      Anna   F          2604 1880
#&gt; 3      Emma   F          2003 1880
#&gt; 4 Elizabeth   F          1939 1880
#&gt; 5    Minnie   F          1746 1880
#&gt; 6  Margaret   F          1578 1880
#&gt; 
#&gt; $`1`
#&gt;       name sex num_of_people year
#&gt; 557 Joseph   M          3844 1907
#&gt; 558  Frank   M          2943 1907
#&gt; 559 Edward   M          2576 1907
#&gt; 560  Henry   M          2203 1907
#&gt; 561   Mary   F         18665 1908
#&gt; 562  Helen   F          8439 1908
#&gt; 
#&gt; $`2`
#&gt;         name sex num_of_people year
#&gt; 1113    John   M         47499 1935
#&gt; 1114 William   M         40198 1935
#&gt; 1115 Richard   M         33945 1935
#&gt; 1116 Charles   M         29983 1935
#&gt; 1117  Donald   M         29661 1935
#&gt; 1118  George   M         18559 1935
#&gt; 
#&gt; $`3`
#&gt;         name sex num_of_people year
#&gt; 1669  Sandra   F         21619 1963
#&gt; 1670 Cynthia   F         21593 1963
#&gt; 1671 Michael   M         83782 1963
#&gt; 1672    John   M         78625 1963
#&gt; 1673   David   M         78467 1963
#&gt; 1674   James   M         71322 1963
#&gt; 
#&gt; $`4`
#&gt;           name sex num_of_people year
#&gt; 2225  Samantha   F         25645 1991
#&gt; 2226     Sarah   F         25225 1991
#&gt; 2227 Stephanie   F         22774 1991
#&gt; 2228  Jennifer   F         20673 1991
#&gt; 2229 Elizabeth   F         20392 1991
#&gt; 2230     Emily   F         20308 1991</code></pre>
</div>
<div id="列目の文字列の異なり" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> 17. １列目の文字列の異なり</h3>
<p>省略</p>
</div>
<div id="各行を3コラム目の数値の降順にソート" class="section level3" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> 18. 各行を3コラム目の数値の降順にソート</h3>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="準備運動unixコマンド正規表現.html#cb57-1" aria-hidden="true" tabindex="-1"></a>txt <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="準備運動unixコマンド正規表現.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(num_of_people)) <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="準備運動unixコマンド正規表現.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>#&gt;      name sex num_of_people year
#&gt; 1   Linda   F         99689 1947
#&gt; 2   Linda   F         96211 1948
#&gt; 3   James   M         94757 1947
#&gt; 4 Michael   M         92704 1957
#&gt; 5  Robert   M         91640 1947
#&gt; 6   Linda   F         91016 1949</code></pre>
</div>
<div id="各行の1コラム目の文字列の出現頻度を求め出現頻度の高い順に並べる" class="section level3" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> 19. 各行の1コラム目の文字列の出現頻度を求め，出現頻度の高い順に並べる</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="準備運動unixコマンド正規表現.html#cb59-1" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_dfr</span>(txt<span class="sc">$</span>name, <span class="cf">function</span>(name) {</span>
<span id="cb59-2"><a href="準備運動unixコマンド正規表現.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(name, <span class="at">pattern =</span> <span class="st">&quot;&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="準備運動unixコマンド正規表現.html#cb59-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">t</span>() <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="準備運動unixコマンド正規表現.html#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>(<span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb59-5"><a href="準備運動unixコマンド正規表現.html#cb59-5" aria-hidden="true" tabindex="-1"></a>}) <span class="sc">%&gt;%</span></span>
<span id="cb59-6"><a href="準備運動unixコマンド正規表現.html#cb59-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">string =</span> V1) <span class="sc">%&gt;%</span></span>
<span id="cb59-7"><a href="準備運動unixコマンド正規表現.html#cb59-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(string) <span class="sc">%&gt;%</span></span>
<span id="cb59-8"><a href="準備運動unixコマンド正規表現.html#cb59-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(string, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb59-9"><a href="準備運動unixコマンド正規表現.html#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>#&gt; # A tibble: 6 x 2
#&gt; # Groups:   string [6]
#&gt;   string     n
#&gt;   &lt;chr&gt;  &lt;int&gt;
#&gt; 1 a       2194
#&gt; 2 e       1554
#&gt; 3 r       1270
#&gt; 4 i       1183
#&gt; 5 h       1018
#&gt; 6 l        943</code></pre>
</div>
</div>
<div id="正規表現" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> 正規表現</h2>
<p>自然言語処理とはいったい</p>
<div id="jsonデータの読み込み" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> 20. JSONデータの読み込み</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="準備運動unixコマンド正規表現.html#cb61-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&quot;.gz&quot;</span>)</span>
<span id="cb61-2"><a href="準備運動unixコマンド正規表現.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://nlp100.github.io/data/jawiki-country.json.gz&quot;</span>, temp)</span>
<span id="cb61-3"><a href="準備運動unixコマンド正規表現.html#cb61-3" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">gzfile</span>(<span class="at">description =</span> temp, <span class="at">open =</span> <span class="st">&quot;rb&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb61-4"><a href="準備運動unixコマンド正規表現.html#cb61-4" aria-hidden="true" tabindex="-1"></a>jsonfile <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_lines</span>(con) <span class="sc">%&gt;%</span></span>
<span id="cb61-5"><a href="準備運動unixコマンド正規表現.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_dfr</span>(<span class="sc">~</span></span>
<span id="cb61-6"><a href="準備運動unixコマンド正規表現.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(.))</span>
<span id="cb61-7"><a href="準備運動unixコマンド正規表現.html#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(con)</span>
<span id="cb61-8"><a href="準備運動unixコマンド正規表現.html#cb61-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-9"><a href="準備運動unixコマンド正規表現.html#cb61-9" aria-hidden="true" tabindex="-1"></a>jsonfile <span class="sc">%&gt;%</span></span>
<span id="cb61-10"><a href="準備運動unixコマンド正規表現.html#cb61-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(title <span class="sc">==</span> <span class="st">&quot;イギリス&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-11"><a href="準備運動unixコマンド正規表現.html#cb61-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(text) <span class="sc">%&gt;%</span></span>
<span id="cb61-12"><a href="準備運動unixコマンド正規表現.html#cb61-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">glimpse</span>() <span class="do">## 長いので</span></span></code></pre></div>
<pre><code>#&gt;  chr &quot;{{redirect|UK}}\n{{redirect|英国|春秋時代の諸侯国|英 (春秋)}}\n{{Otheruses|ヨーロッパの国|長崎県・熊本県の郷土&quot;| __truncated__</code></pre>
</div>
<div id="カテゴリ名を含む行を抽出" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> 21. カテゴリ名を含む行を抽出</h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="準備運動unixコマンド正規表現.html#cb63-1" aria-hidden="true" tabindex="-1"></a>lines <span class="ot">&lt;-</span> jsonfile <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="準備運動unixコマンド正規表現.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(title <span class="sc">==</span> <span class="st">&quot;イギリス&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="準備運動unixコマンド正規表現.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(text) <span class="sc">%&gt;%</span></span>
<span id="cb63-4"><a href="準備運動unixコマンド正規表現.html#cb63-4" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_lines</span>() <span class="sc">%&gt;%</span></span>
<span id="cb63-5"><a href="準備運動unixコマンド正規表現.html#cb63-5" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_subset</span>(stringr<span class="sc">::</span><span class="fu">fixed</span>(<span class="st">&quot;[[Category:&quot;</span>))</span>
<span id="cb63-6"><a href="準備運動unixコマンド正規表現.html#cb63-6" aria-hidden="true" tabindex="-1"></a>lines</span></code></pre></div>
<pre><code>#&gt; [1] &quot;[[Category:イギリス|*]]&quot;                
#&gt; [2] &quot;[[Category:イギリス連邦加盟国]]&quot;        
#&gt; [3] &quot;[[Category:英連邦王国|*]]&quot;              
#&gt; [4] &quot;[[Category:G8加盟国]]&quot;                  
#&gt; [5] &quot;[[Category:欧州連合加盟国|元]]&quot;         
#&gt; [6] &quot;[[Category:海洋国家]]&quot;                  
#&gt; [7] &quot;[[Category:現存する君主国]]&quot;            
#&gt; [8] &quot;[[Category:島国]]&quot;                      
#&gt; [9] &quot;[[Category:1801年に成立した国家・領域]]&quot;</code></pre>
<p>以下、回答略</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="形態素解析.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["nlp100-knocks-r.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
